{"version":3,"sources":["uni-app:///main.js","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?b74f","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?88b4","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?b783","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?af35","uni-app:///pages/search/search.vue","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?c620","webpack:///G:/tianmao-app/tmall-app/pages/search/search.vue?21a3"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,+F;AACAA,UAAU,CAACC,eAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACqC;;;AAG1F;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAgmB,CAAgB,0nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwCpnB,O,CADA,G,YAAA,G;AAEA;AACA,MADA,kBACA;AACA;AACA,oBADA;AAEA,sBAFA,EAEA;AACA,iBAHA,EAGA;AACA,eAJA,EAIA;AACA,wBALA,EAKA;AACA,qBANA,EAMA;AACA,mBAPA,CAOA;AAPA;AASA,GAXA;AAYA,SAZA,qBAYA;AACA;AACA,GAdA;AAeA;AACA,eAhBA,2BAgBA;AACA;AACA,mBADA;;AAGA;AACA;AACA,GAtBA;AAuBA;AACA;AACA,UAFA,oBAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KATA;AAUA;AACA,cAXA,sBAWA,CAXA,EAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnBA;AAoBA;AACA,cArBA,sBAqBA,SArBA,EAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA5BA;AA6BA;AACA,cA9BA,wBA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KAxCA;AAyCA;AACA,iBA1CA,2BA0CA;AACA;AACA;AACA,KA7CA;AA8CA;AACA,WA/CA,mBA+CA,IA/CA,EA+CA;AACA;AACA;AACA;AACA,KAnDA;AAoDA;AACA,cArDA,sBAqDA,SArDA,EAqDA;AACA;AACA,oBAFA,sBAEA,SAFA,mBAEA,YAFA;;AAIA,iFAJA,SAIA,UAJA;AAKA;AACA;AACA;AACA;AACA,mBAFA,MAEA;AACA;AACA,mCADA;AAEA,mCAFA;AAGA,oCAHA;;AAKA;AACA,iBAXA,MAWA;AACA;AACA;AACA;AACA;AACA,mBAHA,MAGA;AACA;AACA;AACA,iBAxBA;;;;AA4BA,KAjFA,EAvBA,E;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AAAA;AAA04B,CAAgB,24BAAG,EAAC,C;;;;;;;;;;;ACA95B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/search/search.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/search/search.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"\nvar renderjs\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cedc0c6\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/search/search.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=template&id=4cedc0c6&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"search-cont\">\r\n\t\t\t<view class=\"search\">\r\n\t\t\t\t<input type=\"text\" placeholder-class=\"inputclass\" confirm-type=\"search\" focus=\"true\" placeholder=\"请输入关键字\" v-model=\"searchdata\"\r\n\t\t\t\t @confirm=\"onKeyInput\" />\r\n\t\t\t</view>\r\n\t\t\t<view class=\"search-code\" @click=\"seArch()\">搜索</view>\r\n\t\t</view>\r\n\t\t<!-- 搜索历史 -->\r\n\t\t<view class=\"search-history\" v-if=\"ifhistory\">\r\n\t\t\t<view class=\"search-title\">\r\n\t\t\t\t<view>最近搜索</view>\r\n\t\t\t\t<view @click=\"removeStorage()\">\r\n\t\t\t\t\t<image src=\"/static/search/searchend.svg\" mode=\"widthFix\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- tab -->\r\n\t\t\t<view class=\"menu-block\">\r\n\t\t\t\t<block v-for=\"(item,index) in setdata\" :key=\"index\">\r\n\t\t\t\t\t<view @click=\"menubtn(item)\">{{item}}</view>\r\n\t\t\t\t</block>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 展示内容 -->\r\n\t\t<Commodity :commodcradData=\"commodcradData\" v-if=\"!searchno\"></Commodity>\r\n\t\t<!-- 上拉加载 -->\r\n\t\t<loader-on ref=\"loadon\"></loader-on>\r\n\t\t<!--没有搜索结果 -->\r\n\t\t<view class=\"empty-cart\" v-if=\"searchno\">\r\n\t\t\t<image src=\"/static/search/sousuono.svg\" mode=\"widthFix\"></image>\r\n\t\t\t<text>抱歉！暂无相关商品</text>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar {\r\n\t\tlog\r\n\t} = console\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsearchdata: '',\r\n\t\t\t\tifhistory: false, //是否有搜索历史\r\n\t\t\t\tsetdata: [], // 搜索历史数据\r\n\t\t\t\tpageid: 0, // 初始页数\r\n\t\t\t\tcommodcradData: [], //请求获得数据结果\r\n\t\t\t\tsearchno: false, //没有搜索结果\r\n\t\t\t\tsearchkey: '', // 最后一次搜索结果\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.setStorage()\r\n\t\t},\r\n\t\t//上拉加载事件\r\n\t\tonReachBottom() {\r\n\t\t\tthis.$refs.loadon.loAd({\r\n\t\t\t\twhether: true\r\n\t\t\t})\r\n\t\t\tthis.pageid++\r\n\t\t\tthis.searchData(this.searchkey, '002')\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 点击按钮触发搜索\r\n\t\t\tseArch() {\r\n\t\t\t\tif (this.searchdata !== '') {\r\n\t\t\t\t\tthis.ifhistory = false\r\n\t\t\t\t\tthis.pageid = 0\r\n\t\t\t\t\tthis.getStorage(this.searchdata)\r\n\t\t\t\t\tthis.searchData(this.searchdata)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 键盘上搜索或回车键触发\r\n\t\t\tonKeyInput(e) {\r\n\t\t\t\tlet searchKey = e.detail.value\r\n\t\t\t\tif (searchKey !== '') {\r\n\t\t\t\t\tthis.ifhistory = false\r\n\t\t\t\t\tthis.pageid = 0\r\n\t\t\t\t\tthis.getStorage(searchKey)\r\n\t\t\t\t\tthis.searchData(searchKey)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 存储搜索历史到本地缓存\r\n\t\t\tgetStorage(searchkey) {\r\n\t\t\t\t// 存之前先取出之前的搜索历史\r\n\t\t\t\tlet seararray = uni.getStorageSync('srarch_key') || []\r\n\t\t\t\tseararray.unshift(searchkey)\r\n\t\t\t\tuni.setStorageSync('srarch_key', seararray)\r\n\t\t\t\t// 存数据\r\n\t\t\t\tuni.setStorageSync()\r\n\t\t\t},\r\n\t\t\t// 取出本地缓存的搜索历史\r\n\t\t\tsetStorage() {\r\n\t\t\t\tlet setdata = uni.getStorageSync('srarch_key')\r\n\t\t\t\t// 数组去重\r\n\t\t\t\tlet setdataarr = Array.from(new Set(setdata))\r\n\t\t\t\tif (setdataarr.length) {\r\n\t\t\t\t\tthis.setdata = setdataarr\r\n\t\t\t\t\tthis.ifhistory = true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.ifhistory = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 清除搜索历史\r\n\t\t\tremoveStorage() {\r\n\t\t\t\tuni.removeStorageSync('srarch_key')\r\n\t\t\t\tthis.setStorage()\r\n\t\t\t},\r\n\t\t\t// 搜索历史的搜索\r\n\t\t\tmenubtn(item) {\r\n\t\t\t\tthis.ifhistory = false\r\n\t\t\t\tthis.pageid = 0\r\n\t\t\t\tthis.searchData(item)\r\n\t\t\t},\r\n\t\t\t// 请求接口搜索商品\r\n\t\t\tasync searchData(searchkey, idn = '001') {\r\n\t\t\t\tthis.searchkey = searchkey\r\n\t\t\t\tconst keys = `?keyword=${searchkey}&page=${this.pageid}`\r\n\t\t\t\ttry {\r\n\t\t\t\t\tlet searchdata = await new this.Request(this.Urls.m().getSearchurl + keys).modeget()\r\n\t\t\t\t\tif (idn === '002') {\r\n\t\t\t\t\t\t// 上拉加载\r\n\t\t\t\t\t\tif (searchdata.data.length) {\r\n\t\t\t\t\t\t\tthis.commodcradData = [...this.commodcradData, ...searchdata.data]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.$refs.loadon.loAd({\r\n\t\t\t\t\t\t\t\twhether: true,\r\n\t\t\t\t\t\t\t\ttips: '没有更多了',\r\n\t\t\t\t\t\t\t\tpicture: false\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$refs.loadon.loAd({whether:false})\r\n\t\t\t\t\t\tif (searchdata.data.length) {\r\n\t\t\t\t\t\t\tthis.commodcradData = searchdata.data\r\n\t\t\t\t\t\t\tthis.searchno = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.searchno = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t//TODO handle the exception\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t.search {\r\n\t\theight: 70upx;\r\n\t\tline-height: 70upx;\r\n\t\twidth: 100%;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tbackground: #FFFFFF;\r\n\t\tborder-radius: 20upx;\r\n\t\tmargin-left: 20upx;\r\n\t}\r\n\r\n\t.search input {\r\n\t\theight: 70upx;\r\n\t\tline-height: 70upx;\r\n\t\twidth: 100%;\r\n\t\tfont-size: 30upx;\r\n\t\tcolor: #666666;\r\n\t\tpadding-left: 30upx;\r\n\t}\r\n\r\n\t.search-cont {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 70upx;\r\n\t\talign-items: center;\r\n\t\tpadding: 30upx 0;\r\n\t\tbackground: #f8f8f8;\r\n\t}\r\n\r\n\t.search-code {\r\n\t\twidth: 150upx;\r\n\t\theight: 50upx;\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30upx;\r\n\t}\r\n\r\n\t.search-history {\r\n\t\tmargin: 20upx;\r\n\t}\r\n\r\n\t.search-title {\r\n\t\tfont-size: 30upx;\r\n\t\tfont-weight: bold;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\theight: 60upx;\r\n\t\tline-height: 60upx;\r\n\t}\r\n\r\n\t.search-title image {\r\n\t\twidth: 36upx;\r\n\t\theight: 36upx;\r\n\t\tdisplay: block;\r\n\t}\r\n\r\n\t.menu-block view {\r\n\t\tbackground: #f7f8fa;\r\n\t\tborder-radius: 6upx;\r\n\t\tfont-size: 27upx;\r\n\t\tcolor: #292c33;\r\n\t\ttext-align: center;\r\n\t\tpadding: 10upx;\r\n\t\tmargin: 20upx 20upx 0 0;\r\n\t}\r\n\r\n\t.menu-block {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: flex-start;\r\n\t\tflex-wrap: wrap;\r\n\t}\r\n</style>\n","import mod from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=css&\"; export default mod; export * from \"-!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./search.vue?vue&type=style&index=0&id=4cedc0c6&scoped=true&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1609377988430\n      var cssReload = require(\"F:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}